======================================================================
Requirements
======================================================================


Operating system
----------------

Ice Touch requires:

- Mac OS X 10.6.8 or later
- iOS 4.2 or later


Compiler
--------

To build iPhone applications, you need:

- Xcode 4.2 with iOS 5.0 SDK

To build Cocoa applications, you need:

- Xcode 4.2


Xcode plug-in
-------------

Our Xcode Plug-in is required to build the Cocoa and iPhone demos in
this distribution. We strongly recommended that you develop Ice for
C++ and Ice Touch applications with Xcode; this greatly simplifies the
build process. For details see Xcode/INSTALL.


Slice translators
-----------------

You will need the Slice-to-Objective-C compiler (slice2objc) and the
Slice-to-C++ compiler (slice2cpp). The distribution includes binaries
for these compilers as well as the source code in case you want to
build them yourself.


mcpp
----

Building the mcpp library is only necessary if you want to build the
Slice translators yourself.

The Slice-to-Objective-C (slice2objc) and Slice-to-C++ (slice2cpp)
compilers have a dependency on mcpp 2.7.2 (with patches).

We recommend downloading the Ice Touch third-party source archive from

 http://www.zeroc.com/icetouch/download.html

This archive contains the source distribution for all Ice Touch
third-party dependencies, as well as required source patches 
and configuration instructions.


======================================================================
Compilation
======================================================================

Unpack the archive. The sources are contained in the IceTouch-@ver@
subdirectory.

Change the working directory to IceTouch-@ver@:

$ cd IceTouch-@ver@

Edit objc/config/Make.rules to establish your build configuration.
There are four possible build configurations:

* Build for Mac OS X

  - In objc/config/Make.rules, leave COMPILE_FOR_IPHONE and
    COMPILE_FOR_IPHONE_SIMULATOR unset

* Build for Cocoa

  - In objc/config/Make.rules, set COMPILE_FOR_COCOA=yes

* Build for the iPhone simulator

  - In objc/config/Make.rules, set COMPILE_FOR_IPHONE_SIMULATOR=yes

* Build for the iPhone or iPod touch

  - In objc/config/Make.rules, set COMPILE_FOR_IPHONE=yes

The Cocoa and iPhone SDKs are built with static libraries. The Mac
OS X builds use dynamic libraries. We do not recommend changing
these settings.

Now you are ready to build Ice Touch:

$ make

This will build the Ice Touch library and tests. If you are building
for Mac OS X, this will also build the demos.

If you are building for Cocoa, you should now use Xcode to build
the demos located in the following subdirectories:

  - objc/demo/Cocoa/chat                    (Objective-c)
  - objc/demo/Cocoa/library                 (Objective-c)

If you are building for iPhone or the iPhone simulator, you should
now use Xcode to build the demos and test suite GUI located in the
following subdirectories:

  - objc/demo/iPhone/chat                   (Objective-c)
  - objc/demo/iPhone/cpp/hello              (C++)
  - objc/demo/iPhone/library                (Objective-c)
  - objc/demo/iPhone/hello                  (Objective-c)
  - objc/demo/iPhone/router                 (Objective-c)
  - objc/test/objc/iPhone/container         (Objective-c)
  - objc/test/cpp/iPhone/container          (C++)

Make sure to build the SDKs before opening the demo or test projects
in Xcode.

After a successful build, you can run the test suite.

Under Mac OS X, run:

$ cd objc
$ python allTests.py

If everything works, you should see lots of "ok" messages. In
case of a failure, the tests abort with "failed".

For the iPhone or iPhone simulator, the test suite runs within an
iPhone application named "Test Suite". The Objective-C version is
located in the directory objc/test/objc/iPhone/container and the C++
version is located in the directory objc/test/cpp/iPhone/container.


======================================================================
Installation
======================================================================

For the Mac OS X build, simply run "make install" to install Ice
Touch in the directory specified by the "prefix" variable in
objc/config/Make.rules.

For Mac OS X builds of Ice Touch, the install name of the shared
library is prefixed with the path /Library/Developer/IceTouch-@ver@/lib.
