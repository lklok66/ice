<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Test Suite | Ice for JavaScript</title>
    <style type="text/css">
        #wss{ margin-top:10px;}
        body { height:100%;}
        #footer {width:100%; height:80px; position:fixed; bottom:0px; background:#333333; color:#ffffff; padding:25px 25px 25px 25px;}
        #footer * {color:#858585;}
        #footer .logo{ float:left;}
        #footer .copyright{ float:right;}
        #body {padding:10px; padding-bottom:80px;   /* Height of the footer */}
    </style>
    <link rel="icon" type="image/x-icon" href="/config/favicon.ico">
  </head>
  <body>
    <nav class="top-bar" data-topbar>
        <ul class="title-area">
            <li class="name">
                <h1><a href="../../../index.html">Ice for JavaScript</a></h1>
            </li>
            <li class="toggle-topbar menu-icon"><a href="#">Menu</a></li>
        </ul>
        <section class="top-bar-section">
            <!-- Right Nav Section -->
            <ul class="right">
                <li class="divider"></li>
                <li><a href="#" id="viewReadme">Readme</a></li>
            </ul>
        </section>
    </nav>
    <ul class="breadcrumbs">
        <li><a href="../../../index.html">Ice</a></li>
        <li class="current"><a href="#">Test</a></li>
    </ul>
    <section role="main" id="body">
        <div class="row">
            <div class="large-12 medium-12 columns">
                <a id="select-test" href="#" data-dropdown="drop" class="button dropdown large">...</a><br>
                <ul id="drop" data-dropdown-content class="f-dropdown tests"></ul>
                <form>
                    <div class="row">
                        <div class="small-3 columns">
                            <label class="right inline" for="default-host">Default Host:</label>
                        </div>
                        <div class="small-9 columns">
                            <input type="text" id="default-host"/>
                        </div>
                    </div>
                    <div class="row">
                        <div class="small-3 columns">
                            <label class="right inline" for="wss">WSS:</label>
                        </div>
                        <div class="small-9 columns">
                            <input id="wss" type="checkbox">
                        </div>
                    </div>
                    <a href="#" class="button" id="run">Run</a>
                    <textarea id="console" class="disabled" readonly></textarea>
                </form>
            </div>
        </div>
    </section>
    <div id="readme-modal" class="reveal-modal medium" data-reveal>
        <h4>Test Suite Readme</h4>
        <hr/>
        <p>TODO</p>
        <a class="close-reveal-modal">&#215;</a>
    </div>
    <div id="footer">
        <div class="logo">
            <h4><strong>ZeroC</strong></h4>
        </div>
        <div class="copyright">
            <h6>Â© 2014 ZeroC, Inc. All rights reserved.</h6>
        </div>
    </div>
    <script type="text/javascript">
        var TestCases = {
                "Ice/binding": ["Test.js", "Client.js"],
                "Ice/defaultValue": ["Test.js", "Client.js"],
                "Ice/enums": ["Test.js", "Client.js"],
                "Ice/exceptions": ["Test.js", "Client.js"],
                "Ice/exceptionsBidir": ["Test.js", "TestAMD.js", "ThrowerI.js", "AMDThrowerI.js",
                                        "../exceptions/Client.js", "Client.js"],
                "Ice/facets": ["Test.js", "Client.js"],
                "Ice/facetsBidir": ["Test.js", "TestI.js", "../facets/Client.js", "Client.js"],
                "Ice/info": ["Test.js", "Client.js"],
                "Ice/inheritance": ["Test.js", "Client.js"],
                "Ice/inheritanceBidir": ["Test.js", "InitialI.js", "../inheritance/Client.js", "Client.js"],
                "Ice/operations": ["Test.js", "Twoways.js", "Oneways.js", "BatchOneways.js", "Client.js"],
                "Ice/operationsBidir": ["Test.js", "TestAMD.js", "../operations/Twoways.js", "../operations/Oneways.js", 
                                        "../operations/BatchOneways.js", "MyDerivedClassI.js", "AMDMyDerivedClassI.js", 
                                        "../operations/Client.js", "Client.js"],
                "Ice/objects": ["Test.js", "Client.js"],
                "Ice/optional": ["Test.js", "Client.js"],
                "Ice/optionalBidir": ["Test.js", "TestAMD.js", "InitialI.js", "AMDInitialI.js", 
                                      "../optional/Client.js", "Client.js"],
                "Ice/promise": ["Client.js"],
                "Ice/proxy": ["Test.js", "Client.js"],
                "Ice/retry": ["Test.js", "Client.js"],
                "Ice/slicing/exceptions": ["Test.js", "Client.js"],
                "Ice/slicing/objects": ["Test.js", "Client.js"],
                "Ice/timeout": ["Test.js", "Client.js"]
            };
            
            var current;
            var basePath = "../../";
            for(name in TestCases)
            {
                if(document.location.pathname.indexOf(name) !== -1)
                {
                    current = name;
                    if(name.split("/").length === 3)
                    {
                        basePath = "../../../";
                    }
                }
            }
            
            scripts = [
                basePath + "../config/foundation/js/modernizr.js",
                basePath + "../config/foundation/js/jquery.js",
                basePath + "../config/foundation/js/foundation.min.js",
                basePath + "../lib/Ice.js"
            ];
            
            TestCases[current].forEach(
                function(script)
                {
                    scripts.push(script);
                });
            scripts.push(basePath + "Common/TestSuite.js");
            
            var head = document.getElementsByTagName("head")[0];
            
            var link = document.createElement("link");
            link.rel = "stylesheet";
            link.href = basePath + "../config/foundation/css/foundation.css";
            head.appendChild(link);
            
            function loadScript()
            {
                if(scripts.length > 0)
                {
                    var script = document.createElement("script");
                        script.type = "text/javascript";
                        script.src = scripts.shift();
                        script.onload = function()
                        {
                            loadScript();
                        };
                        
                        //
                        // There isn't onload event in IE
                        //
                        script.onreadystatechange = function ()
                        {
                            if(this.readyState == 'complete')
                            {
                                loadScript();
                            }
                        };
                        head.appendChild(script);
                }
                else
                {
                    $("#select-test").text(current);
                }
            }
            loadScript();
    </script>
  </body>
</html>
