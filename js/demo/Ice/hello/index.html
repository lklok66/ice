<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hello Demo | Ice for JavaScript</title>
    <!-- Bundle with all the stylesheets used to build the user interface,
         see config/Makefile in your distribution for details -->
    <link rel="stylesheet" type="text/css" href="../../../assets/common.css" />
    <link rel="icon" type="image/x-icon" href="../../../assets/favicon.ico">
  </head>
  <body>
    <!-- Header section that contains title and navigation bar -->
    <section role="header" id="header">
        <nav class="top-bar" data-topbar>
            <ul class="title-area">
                <li class="name">
                    <h1><a href="../../../index.html">Ice for JavaScript</a></h1>
                </li>
                <li class="toggle-topbar menu-icon"><a href="#">Menu</a></li>
            </ul>
            <section class="top-bar-section">
                <!-- Right Nav Section -->
                <ul class="right">
                    <li class="divider"></li>
                    <li><a href="#" id="viewReadme">Readme</a></li>
                    <li><a href="#" id="viewSource">Source</a></li>
                </ul>
            </section>
        </nav>
        <ul class="breadcrumbs">
            <li><a href="../../../index.html">Ice</a></li>
            <li><a href="../../index.html">Demos</a></li>
            <li class="current"><a href="#">Hello</a></li>
        </ul>
    </section>
    
    <!-- Main section that contains the user interface -->
    <section role="main" id="body">
        <div class="row">
            <div class="large-12 medium-12 columns">
                <form>
                    <div class="row">
                        <div class="small-3 columns">
                            <label class="right inline" for="mode">Mode:</label>
                        </div>
                        <div class="small-9 columns">
                            <select id="mode">
                                <option value="twoway">Twoway</option>
                                <option value="twoway-secure">Twoway Secure</option>
                                <option value="oneway">Oneway</option>
                                <option value="oneway-secure">Oneway Secure</option>
                                <option value="oneway-batch">Oneway Batch</option>
                                <option value="oneway-batch-secure">Oneway Batch Secure</option>
                            </select>
                        </div>
                    </div>
                    <div class="row">
                        <div class="small-3 columns">
                            <label class="right inline" for="timeout">Timeout:</label>
                        </div>
                        <div class="small-9 columns">
                            <div id="timeout" class="noUiSlider"></div>
                        </div>
                    </div>
                    <br/>
                    <div class="row">
                        <div class="small-3 columns">
                            <label class="right inline" for="delay">Delay:</label>
                        </div>
                        <div class="small-9 columns">
                            <div id="delay" class="noUiSlider"></div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="small-12 columns">
                            <a href="#" class="button small" id="hello">Hello World!</a>
                            <a href="#" class="button small" id="shutdown">Shutdown</a>
                            <a href="#" class="button disabled small" id="flush">Flush</a>
                        </div>
                    </div>
                    <textarea id="output" class="disabled" readonly></textarea>
                    <div id="progress" class="row hide">
                        <div class="small-12 columns left">
                            <div class="inline left icon"></div>
                            <div class="text">Sending Request...</div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </section>
    
    <!-- Modal dialog to show the client README -->
    <div id="readme-modal" class="reveal-modal medium" data-reveal>
        <div class="contents">
            <h4>Hello Demo Readme</h4>
            <hr/>
            <p>This demo illustrates how to invoke ordinary (twoway) operations, as
            well as how to make oneway, secure, and batched invocations.</p>

            <p>First follow the instructions from the C++ Ice hello demo README to
            start the server.</p>

            <p>You can change the invocation mode using the <strong>"Mode"</strong> 
            select box; the default is "Twoway" invocation.</p>
            
            <p>To send an invocation, click the <strong>"Hello World!"</strong> button, 
            to shutdown the server click the <strong>"Shutdown"</strong> button, 
            and to flush batch requests click the <strong>"Flush"</strong> button 
            (this is only enabled when there are pending requests to flush).</p>
            
            <p>To test timeouts, you can use the timeout slider to set a timeout 
            on the client proxy and the delay slider to set a delayed response in 
            the server to cause a timeout.</p>
            
            <p>You will notice that two "Hello World!" messages will be printed by
            the server in this case. This is because the <code>sayHello</code> method is marked
            as idempotent in the Slice, meaning that Ice does not need to follow
            the at-most-once retry semantics. See the 
            <a href="http://doc.zeroc.com/display/Ice/Automatic+Retries#AutomaticRetries-AutomaticRetriesforIdempotentOperations">manual</a>
            for more information about retry behavior.</p>
        </div>
        <a class="close-reveal-modal">&#215;</a>
    </div>
    <!-- Modal dialog to show the client source code -->
    <div id="source-modal" class="reveal-modal" data-reveal>
        <a class="close-reveal-modal">&#215;</a>
        <dl class="tabs" data-tab>
            <dd class="active"><a href="#panel2-1">Slice</a></dd>
            <dd><a href="#panel2-2">JavaScript</a></dd>
            <dd><a href="#panel2-3">HTML</a></dd>
        </dl>
        <div class="tabs-content">
            <div class="content active" id="panel2-1">
                <h6>File: demo/Ice/hello/Hello.ice</h6>
                <pre class="source language-c" data="Hello.ice"></pre>
            </div>
            <div class="content" id="panel2-2">
                <h6>File: demo/Ice/hello/browser/Client.js</h6>
                <pre class="source" data="browser/Client.js"></pre>
            </div>
            <div class="content" id="panel2-3">
                <h6>File: demo/Ice/hello/index.html</h6>
                <pre class="source" data="index.html"></pre>
            </div>
        </div>
    </div>
    <div id="setup-modal" class="reveal-modal" data-reveal>
        <p>
            <h3>The Ice for JavaScript demos require a web server. Please follow these steps to run the demo:</h3>
            <hr/>
            <ul>
                <li>Install <a href="http://nodejs.org/" target="_blank">Node.js</a></li>
                <li>Open a command window and change to the demo distribution directory:<br/>
                    <pre>$ cd IceJS-0.1.0-demos</pre></li>
                <li>Set the <tt>ICE_JS_HOME</tt> environment variable to point to your Ice for JavaScript
                    installation directory.<br/>
                     On Windows:<br/>
                    <pre>set ICE_JS_HOME=C:\Program Files\ZeroC\IceJS-0.1.0</pre>
                     On Linux and OS X:<br/>
                    <pre>export ICE_JS_HOME=/opt/IceJS-0.1.0</pre>
                </li>
                <li>Start the demo web server:<br/>
                    <pre>node bin/HttpServer.js</pre></li>
                <li>Start the corresponding C++ Ice server (see the demo Readme)
                <li>Now you can run the demo by navigating to <a class="demo" href=""></a></li>
            </ul>
        </p>
    </div>
    <!-- Footer section -->
    <section role="footer" id="footer">
        <div class="logo">
            <h4><strong>ZeroC</strong></h4>
        </div>
        <div class="copyright">
            <h6>Â© 2014 ZeroC, Inc. All rights reserved.</h6>
        </div>
    </section>
    <!-- Bundle with all the scripts used to build the user interface,
         see assets/Makefile in your distribution for details -->
    <script type="text/javascript" src="../../../assets/common.min.js"></script>
    
    <script type="text/javascript">
        $(document).ready(
            function(){
                console.log(document.location.protocol);
                if(document.location.protocol === "file:")
                {
                    var paths = document.location.pathname.split("/");
                    var i = paths.indexOf("demo");
                    if(i == -1) // It's a demo distribution?
                    {
                        i = paths.indexOf("demojs");
                    }
                    paths = paths.slice(i);
                    var href = "http://127.0.0.1:8080/" + paths.join("/");
                    $("#setup-modal a.demo").text(href);
                    $("#setup-modal a.demo").attr("href", href);
                    $("#setup-modal").foundation({
                        reveal:
                        {
                            close_on_background_click: false,
                            close_on_esc: false
                        }
                    });
                    $("#setup-modal").foundation("reveal", "open");
                }
            });
    </script>
    
    <!-- Ice.js (Ice run-time library) -->
    <script type="text/javascript" src="../../../lib/Ice.js"></script>
    <!-- Hello.js (Demo generated code) -->
    <script type="text/javascript" src="Hello.js"></script>
    <!-- browser/Client.js (Hello Demo Application) -->
    <script type="text/javascript" src="browser/Client.js"></script>
  </body>
</html>
