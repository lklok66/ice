======================================================================
Introduction
======================================================================

This file describes how to build and install Ice for Android from
source code. Note that this distribution also includes JAR files
containing the Ice for Android run time (java/lib/IceAndroid.jar) and
the Ice for Android tests (java/lib/IceTest.jar), therefore it is not
usually necessary to compile the source yourself. Please refer to the
README file for more information on incorporating Ice for Android into
your development environment.

This release of Ice for Android includes a modified version of Ice for
Java 3.3 that addresses some limitations in the Android libraries. The
source code of the Ice for Android run time has no dependencies on
Android and can be compiled using any suitable Ice for Java
development environment. However, ZeroC only supports the development
platforms that are also supported by the Android development tools,
namely Mac OS X Leopard, Linux, and Windows.

After building the source you can run the demos and test suites on
your development platform, but note that Ice for Android is only
supported for use in creating Android applications.


======================================================================
Requirements
======================================================================


Operating systems
-----------------

Ice for Android has been tested in the Android emulator and on the
T-Mobile G1 handset. The supported development environments are
Mac OS X Leopard, Red Hat Enterprise Linux 5.2, and Windows XP.


Java version
------------

Ice for Android requires J2SE 1.5.0 or later.

You can download Java5 and Java6 for Windows and Linux from:

  http://java.sun.com

Make sure to add javac and java to your PATH.


Ice
---

Ice for Android requires an installation of Ice 3.3. You can download
a binary distribution from the ZeroC web site, or you can build Ice
yourself.

Binary distributions for supported platforms are available at

  http://www.zeroc.com/download.html

ZeroC currently supplies Ice 3.3 RPM packages for RHEL 5.1, but these
RPMs can also be used on RHEL 5.2. If you install Ice from RPMs, make
sure you install the ice-java-devel RPM and its dependencies.


======================================================================
Compiling the Source
======================================================================


Preparing to Build
------------------

The Ice for Android build system requires Apache Ant 1.7.0 or later.
Ant is available at the link below:

  http://ant.apache.org/

The build system requires the Slice-to-Java translator, the Slice
files and the Slice Ant tasks from your Ice 3.3 distribution. The
build system assumes that your Ice installation is located in a
standard directory unless you set the ICE_HOME environment variable to
specify an alternate location. Setting ICE_HOME is not necessary if
you have installed Ice from RPMs, or if you installed it in
/opt/Ice-3.3.0 on Unix or C:\Ice-3.3.0 on Windows. For example:

  # On Unix.
  $ export ICE_HOME=$HOME/testing/Ice-3.3.0

  # On Windows
  > set ICE_HOME=C:\testing\Ice-3.3.0

Before building Ice for Android, review the settings in the file
java/config/build.properties and edit as necessary.


Building Ice for Android
------------------------

Change your working directory to the java directory:

  cd java

To build only the Ice for Android run time (IceAndroid.jar), use the
following command:

  ant ice-jar

To build the entire source distribution, including tests and sample
programs, use this command:

  ant

Upon completion, the JAR files can be found in the "lib" subdirectory.

If at any time you wish to discard the current build and start a new
one, use these commands:

  ant clean
  ant


======================================================================
Installation
======================================================================

The only file installed by this distribution is

  java/lib/IceAndroid.jar

You can copy this file to the location of your choice, or you can run
"ant install" to copy this file to the directory specified by the
"prefix" variable in config/build.properties. It is not necessary to
rebuild Ice for Android after changing the value of the prefix
variable.

After installation, add IceAndroid.jar to your CLASSPATH or to your
Eclipse configuration. Refer to the README file for more information.


======================================================================
Tests
======================================================================

You will need Python to run the test suite on your development
platform:

  http://www.python.org/download

To run the tests, open a command window and change to the java
directory. At the command prompt, execute:

  python allTests.py

You can also run tests individually by changing to the test directory
and running this command:

  python run.py

If everything worked out, you should see lots of "ok" messages. In
case of a failure, the tests abort with "failed".

You can also run the test suite as an Android application, as
described in the README file.
